<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

 <mapper namespace="com.class_ic.dao.MessageDAO">
 
<select  id="selectSameMemberList" parameterType="String" resultType="com.class_ic.vo.MemberDTO">
select email ,name from member where email in(select email from classmember where classCode=#{classCode})
</select>


<select  id="selectMsgContentList" parameterType="String" resultType="com.class_ic.vo.MessageDTO">
SELECT  msr.name as name, ms.messageNo as messageNo, ms.msContent as msContent,  ms.msSendTime as msSendTime
FROM (
SELECT m.name as name, mr.messageNo as messageNo
FROM Member m JOIN MessageReceive mr
ON m.email = mr.emailR
WEHRE mr.emailR=#{email}) msr JOIN Message ms
ON msr.messageNo = ms.messageNo
</select>

</mapper>

